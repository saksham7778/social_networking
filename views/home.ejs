<body>
    <h1> Welcome to Codeial Home Page !</h1>

    <section id="feed-posts">
        
        <h1 style="text-align: center;">    Posts   </h1>
        <% if(locals.user) { %>
        <form action="/posts/create" id="new-post-form" method="POST">
            <textarea name="content" cols="50" rows="5" placeholder="Type here ... " required>
            </textarea>
            <input type="submit" value="Post">
        </form>
        <% } %>
    
        <div id="posts-list-container">
            <ul>
                <%  for(post of posts){  %>                
                    <li>
                        <p>
                            <%= post.content %>
                            <br>
                            <%= post.user.name %>
                        </p>
                                            
                    </li>

                    <div class="post-comments">
                        
                        <% if(locals.user){ %>
                            <form action="/comments/create" method="POST">
                                <input type="text" name="content" placeholder="Type here to add comment . ." required>
                                <input type="hidden" name="post" value="<%= post._id%>" >
                                <input type="submit" value="Add Comment">
                            </form>
                        <% } %>
                
                        <div class="post-comments-list">
                            <ul id="post-comments <%= post._id%>">
                                <% for(comment of post.comments){%>
                                <li>
                                    <p>
                                        <%= comment.content %>
                                        <br>
                                        <%= comment.user.name %>
                                    </p>
                                    
                                </li>
                                <% } %>
                            </ul>
                        </div>

                    </div>  
                <%  } %>
            </ul>
        </div>
    </section>
</body> 